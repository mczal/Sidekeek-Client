<!DOCTYPE html>
<html ng-app="sidekeekApp" class="js">

	<head>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="SHORTCUT ICON" href="assets/img/favicon.ico"/>

		<title>Sidekeek</title>

		<!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
		<link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">

		<!-- Custom CSS -->
		<link href="assets/css/custom.css" rel="stylesheet">
		<link href="assets/css/animate.css" rel="stylesheet">
		<link href="assets/css/component.css" rel="stylesheet">
		<link href="assets/css/demo.css" rel="stylesheet">
		<link href="assets/css/normalize.css" rel="stylesheet">

		<!-- Custom Fonts -->
		<link href="bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>

	<body id="page-top">
		<!-- Navigation -->
		<div class="overlay">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<div class="offcanvas-portofolio">
							<div class="box-add-portofolio">
								<div class="row">
									<div class="pull-right">
										<div class="close">
											<span class="fa fa-2x fa-times" onclick="closeOffcanvas()"></span>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-4">
										<div class="upload">
											<div class="box container-fluid">
												<div class="file-upload text-center">
													<img src="assets/img/uploadfoto.png" alt="" />
													<input type="file" name="file" id="file-portofolio-1" class="inputfile inputfile-1" data-multiple-caption="{count} files selected"/>
													<label for="file-portofolio-1"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg> <span>Choose a file&hellip;</span></label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-8">
										<div class="form-group form-group-xl">
											<input type="text" class="form-control" placeholder="Title" value="{{dataPortofolio.title}}">
										</div>
										<div class="form-group">
											<textarea type="text" class="form-control" rows="10" placeholder="Description">{{dataPortofolio.description}}</textarea>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-3 pull-right">
										<input type="submit" value="Save" class="inputButton"/>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header page-scroll">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#/home">
						<span style="padding-right:10px; padding-left:10px; vertical-align: 2px;"><img src="assets/img/sidekeek.png" width="35px" alt=""></span>
						Sidekeek
					</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	<!--				<div class="search">-->
	<!--					<input type="text" placeholder="Search">-->
	<!--				</div>-->
					<ul class="nav navbar-nav navbar-right">
						<li class="page-scroll">
							<a href="#">Discover</a>
						</li>
						<li class="page-scroll">
							<a href="#/start-host">Start Hosting</a>
						</li>
						<li class="page-scroll">
							<div class="dropdown hide" id="img-acc">
								<img src="assets/img/imgacc.png" alt="" class="img-circle img-acc" data-toggle="dropdown">
							  	<div class="dropdown-menu dropdown-login-acc">
									<div class="row">
										<div class="col-lg-12 text-center">
											<img src="assets/img/imgacc.png" alt="" class="img-circle img-acc-child" data-toggle="dropdown">
										</div>
										<div class="text-center">
											<em class="text-center">sidekeek.co</em>
											<div style="border-top: 1px solid #498844; margin: 9px 0;"></div>
											<a href="#/profile">View Profile</a>
											<div style="border-top: 1px solid #498844; margin: 9px 0;"></div>
											<a href="#/edit-profile-full">Edit Profile</a>
											<div style="border-top: 1px solid #498844; margin: 9px 0;"></div>
											<a href="#" onclick="logout()">Logout</a>
										</div>
									</div>
							  	</div>
							</div>
						</li>
						<li class="page-scroll" id="btn-hide">
							<a href="#/sign-up">Sign Up</a>
						</li>
						<li class="page-scroll">
							<div class="dropdown">
								<a class="btn btn-success dropdown-toggle" style="vertical-align:-17px; width:80px;" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
							    	Login
							  	</a>
							  	<ul class="dropdown-menu dropdown-login">
									<h5 style="color:#fff">Login</h5>
									<form>
										<div class="form-group">
											<input type="email" class="form-control" placeholder="Email" id="email">
										</div>
										<div class="form-group">
											<input type="password" class="form-control" placeholder="Password" id="password">
										</div>
										<a href="#"><button type="submit" class="btn btn-sm btn-default" onclick="login()">Submit</button></a>
									</form>
							  	</ul>
							</div>
						</li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container-fluid -->
		</nav>

		<!-----------CONTENT----------->
		<div ng-view></div>

		<script src="bower_components/jquery/dist/jquery.js"></script>
		<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
		<script src="bower_components/angular/angular.js"></script>
		<script src="bower_components/angular-route/angular-route.js"></script>
		<script src="bower_components/angular-animate/angular-animate.js"></script>
		<script src="bower_components/angular-bootstrap/ui-bootstrap.js"></script>
		<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
		<script src="bower_components/jquery-easing/jquery.easing.js"></script>


		<script src="assets/js/app.js"></script>
		<script src="assets/js/controller.js"></script>
		<script src="assets/js/classie.js"></script>
		<script src="assets/js/cbpAnimatedHeader.js"></script>
		<script src="assets/js/custom.js"></script>

		<script type="text/javascript">
			// array of month
			var arrOfMonth = [];
			arrOfMonth['Jan']='01';
			arrOfMonth['Feb']='02';
			arrOfMonth['Mar']='03';
			arrOfMonth['Apr']='04';
			arrOfMonth['May']='05';
			arrOfMonth['Jun']='06';
			arrOfMonth['Jul']='07';
			arrOfMonth['Aug']='08';
			arrOfMonth['Sep']='09';
			arrOfMonth['Oct']='10';
			arrOfMonth['Nov']='11';
			arrOfMonth['Des']='12';

			// current time using time interval (every 5 second)
			function curDate(){
				var cur = new Date();
				var temp = cur +" ";
				var temp2 = temp.split(" ");
				return temp2[3]+"-"+temp2[2]+"-"+arrOfMonth[temp2[1]]+" "+temp2[4];
			}

			// var ref = setInterval(function(){ refresh() }, 100);
		    // function refresh(){
		    // 	if (localStorage.getItem('session') == 'undefined'){
		    //     	window.location.assign("/");
		    //    	}
		    //  }

			// login session
			var login = function(){
				var email = $('#email').val();
				var pass = $('#password').val();
				localStorage.setItem('emailHost', email);
				$.ajax({
					url: 'http://localhost:3000/sideAPIkeek/login',
					method: 'POST',
					contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
					data:{
						token: 'eyJhbGciOiJIUzI1NiJ9.dXNlcg.2Tbs8TkRGe7ZNu4CeiR5BXpK7-MMQZXc6ZTOLZiBoLQ',
						email: email,
						password: pass,
						timestamp: curDate()
					},
					success: function(response){
						localStorage.setItem('session', response.session);
						$('#btn-hide').addClass('hide');
						$('.dropdown').addClass('hide');
						$('#img-acc').removeClass('hide');
					},
					error: function(xhr, status, error){
						console.log(error);
					}
				});
			}

			// logout session
			var logout = function(){
				$.ajax({
					url: 'http://localhost:3000/sideAPIkeek/logout',
					method: 'POST',
					contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
					data:{
						token: 'eyJhbGciOiJIUzI1NiJ9.dXNlcg.2Tbs8TkRGe7ZNu4CeiR5BXpK7-MMQZXc6ZTOLZiBoLQ',
						sessionCode: localStorage.getItem('session')
					},
					success: function(response){
						$('#btn-hide').removeClass('hide');
						$('.dropdown').removeClass('hide');
						$('#img-acc').addClass('hide');
					},
					error: function(xhr, status, error){
						console.log(error);
					}
				});
			}

			//check if the session is still available
			$.ajax({
				url: 'http://localhost:3000/sideAPIkeek/integrityCheck',
				method: 'POST',
				contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
				data:{
					token: 'eyJhbGciOiJIUzI1NiJ9.dXNlcg.2Tbs8TkRGe7ZNu4CeiR5BXpK7-MMQZXc6ZTOLZiBoLQ',
					sessionCode: localStorage.getItem('session')
				},
				success: function(response){
					// alert(response.status);
					if (response.status == "forbidden") {
						$('#btn-hide').removeClass('hide');//sign-up button
						$('.dropdown').removeClass('hide');//login button
						$('#img-acc').addClass('hide');//profile pict
					}else{
						$('#btn-hide').addClass('hide');
						$('.dropdown').addClass('hide');
						$('#img-acc').removeClass('hide');
					}
				},
				error: function(xhr, status, error){
					console.log(error);
				}
			});

			var closeOffcanvas = function (){
				$(".overlay").hide();
	            $(".offcanvas-portofolio").hide();
			}

		</script>

	</body>

</html>


<!-- <div class="row" ng-repeat="dataPortofolio in dataPortofolios">
	<div class="col-lg-4">
		<div class="upload">
			<div class="box container-fluid">
				<div class="file-upload text-center">
					<img src="assets/img/uploadfoto.png" alt="" />
					<input type="file" name="file" id="file-portofolio-1" class="inputfile inputfile-1" data-multiple-caption="{count} files selected"/>
					<label for="file-portofolio-1"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg> <span>Choose a file&hellip;</span></label>
				</div>
			</div>
		</div>
	</div>
	<div class="col-lg-8">
		<div class="form-group form-group-xl">
			<input type="text" class="form-control" placeholder="Title" value="{{dataPortofolio.title}}">
		</div>
		<div class="form-group">
			<textarea type="text" class="form-control" rows="10" placeholder="Description">{{dataPortofolio.description}}</textarea>
		</div>
	</div>
</div> -->
